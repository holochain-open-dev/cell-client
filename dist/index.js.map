{"version":3,"file":"index.js","sources":["../src/holo-client.ts","../src/holochain-client.ts"],"sourcesContent":["import { CellClient } from \"./cell-client\";\n\nimport { AppSignalCb, InstalledCell } from \"@holochain/conductor-api\";\nimport { Connection, Branding } from \"@holo-host/web-sdk\";\n\nexport class HoloClient implements CellClient {\n  constructor(\n    protected connection: any,\n    protected cellData: InstalledCell,\n    protected branding: Branding\n  ) {}\n\n  get cellId() {\n    return this.cellData.cell_id;\n  }\n\n  callZome(zomeName: string, fnName: string, payload: any): Promise<any> {\n    return this.connection.zomeCall(\n      this.cellData.cell_nick,\n      zomeName,\n      fnName,\n      payload\n    );\n  }\n\n  addSignalHandler(signalHandler: AppSignalCb) {\n    new Connection(this.connection.chaperone_url.origin, signalHandler, this.branding);\n  }\n}\n","import * as ConductorApi from \"@holochain/conductor-api\";\nimport { CellClient } from \"./cell-client\";\n\nexport class HolochainClient implements CellClient {\n  constructor(\n    protected appWebsocket: ConductorApi.AppWebsocket,\n    protected cellData: ConductorApi.InstalledCell\n  ) {}\n\n  get cellId() {\n    return this.cellData.cell_id;\n  }\n\n  callZome(zomeName: string, fnName: string, payload: any): Promise<any> {\n    return this.appWebsocket.callZome({\n      cap: null as any,\n      cell_id: this.cellId,\n      zome_name: zomeName,\n      fn_name: fnName,\n      payload: payload,\n      provenance: this.cellId[1],\n    });\n  }\n\n  addSignalHandler(signalHandler: ConductorApi.AppSignalCb) {\n    ConductorApi.AppWebsocket.connect(\n      this.appWebsocket.client.socket.url,\n      15000,\n      signalHandler\n    );\n  }\n}\n"],"names":[],"mappings":";;;MAKa,UAAU;IACrB,YACY,UAAe,EACf,QAAuB,EACvB,QAAkB;QAFlB,eAAU,GAAV,UAAU,CAAK;QACf,aAAQ,GAAR,QAAQ,CAAe;QACvB,aAAQ,GAAR,QAAQ,CAAU;KAC1B;IAEJ,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;KAC9B;IAED,QAAQ,CAAC,QAAgB,EAAE,MAAc,EAAE,OAAY;QACrD,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAC7B,IAAI,CAAC,QAAQ,CAAC,SAAS,EACvB,QAAQ,EACR,MAAM,EACN,OAAO,CACR,CAAC;KACH;IAED,gBAAgB,CAAC,aAA0B;QACzC,IAAI,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,EAAE,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACpF;;;MCxBU,eAAe;IAC1B,YACY,YAAuC,EACvC,QAAoC;QADpC,iBAAY,GAAZ,YAAY,CAA2B;QACvC,aAAQ,GAAR,QAAQ,CAA4B;KAC5C;IAEJ,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;KAC9B;IAED,QAAQ,CAAC,QAAgB,EAAE,MAAc,EAAE,OAAY;QACrD,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAChC,GAAG,EAAE,IAAW;YAChB,OAAO,EAAE,IAAI,CAAC,MAAM;YACpB,SAAS,EAAE,QAAQ;YACnB,OAAO,EAAE,MAAM;YACf,OAAO,EAAE,OAAO;YAChB,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SAC3B,CAAC,CAAC;KACJ;IAED,gBAAgB,CAAC,aAAuC;QACtD,YAAY,CAAC,YAAY,CAAC,OAAO,CAC/B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EACnC,KAAK,EACL,aAAa,CACd,CAAC;KACH;;;;;"}